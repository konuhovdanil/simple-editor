(function(){"use strict";var e={3465:function(e,t,n){var a=n(1020),i=n(9242),l=n(3396),o=n(4870),r=(n(560),n(6236));const c=(0,a.Q_)("path",(()=>{const e=s(),t=(0,o.iH)([]),n=(0,l.Fl)((()=>0===t.value.length)),a=(0,l.Fl)((()=>{if(n.value)return[];const e=t.value;return"dir"===e.at(-1).type?t.value:e.slice(0,-1)})),i=(0,l.Fl)((()=>{const t=[];return a.value.length>0&&a.value.reduce(((e,n)=>{const a=e.findIndex((e=>e.id===n.id));return t.push(a),e[a].childs}),e.hierarchyTree.childs),t})),r=e=>{t.value=e};return{path:t,isRootDir:n,updatePath:r,parentIdxs:i}})),s=(0,a.Q_)("hierarchyTree",(()=>{const e=c(),t=(0,o.iH)({name:"",id:r.V.v4(),type:"dir",extension:"",childs:[]}),n=(0,o.iH)(null),a=(0,l.Fl)((()=>e.parentIdxs.slice(0,-1).reduce(((e,t)=>e.childs[t]),t.value))),i=(0,l.Fl)((()=>e.parentIdxs.reduce(((e,t)=>e.childs[t]),t.value))),s=(0,l.Fl)((()=>{if(!n.value)return null;const e=i.value.childs.find((e=>e.id===n.value));return e||i.value})),d=e=>{n.value=e},u=e=>{const t=JSON.stringify(e.childs||[]);localStorage.setItem("hierarchyTree",t)},p=()=>{const e=localStorage.getItem("hierarchyTree");e&&(t.value.childs=JSON.parse(e)||[])},h=(e,t,n)=>{const a=i.value,l=1===e,o=l?"file":"dir",c={type:o,id:r.V.v4(),name:t,extension:n};l?c.code="":c.childs=[],a.childs.push(c)},v=(e,t)=>{const n=s.value;n.name=e,"file"===s.value?.type&&(n.extension=t)},f=()=>{const e=i.value.childs.some((e=>e.id===n.value))?i.value:a.value;e.childs=e.childs.filter((e=>e.id!==s.value?.id)),n.value=null},m=e=>{const t=i.value,a=t.childs.findIndex((e=>e.id===n.value));t.childs[a].code=e};return(0,l.bv)(p),(0,l.YP)(t,u,{deep:!0}),{hierarchyTree:t,currentBranch:i,activeElementId:n,activeElement:s,createBranch:h,renameBranch:v,deleteBranch:f,updateBranch:m,updateActiveElementId:d}}));var d=n(6922),u=n(7786),p=n(5357);const h={class:"code-editor"},v={key:0,class:"code-editor__file"};var f={__name:"CodeEditor",setup(e){const t=s(),n=c(),a=(0,o.iH)(""),i=(0,o.XI)(),r=[(0,d.eJ)()],f=(0,l.Fl)((()=>n.path.length>0&&"file"===n.path?.at(-1)?.type)),m=e=>{i.value=e.view};return(0,l.YP)((()=>n.path),(()=>{f.value&&(a.value=n.path.at(-1).code)}),{deep:!0}),(e,n)=>((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)((0,o.SU)(u.Z),{class:"code-editor__title"},{default:(0,l.w5)((()=>[(0,l.Uk)("Code editor")])),_:1}),f.value?((0,l.wg)(),(0,l.iD)("div",v,[(0,l.Wm)((0,o.SU)(p.Z1),{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),placeholder:"Code goes here...",style:{height:"100%"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:r,onReady:m,onChange:(0,o.SU)(t).updateBranch},null,8,["modelValue","onChange"])])):(0,l.kq)("",!0)]))}},m=n(89);const y=(0,m.Z)(f,[["__scopeId","data-v-d080940c"]]);var _=y,g=n(7139),w=n(8379),x=n(3520),S=n(2383);const U={class:"action-popup"},b={key:0};var k={__name:"ActionPopup",props:{popupState:{type:Object,required:!0},oldFilename:{type:String,required:!0}},emits:["update:popup-state","update:hierarchy-tree"],setup(e,{emit:t}){const n=["Создать файл","Создать папку","Переименование","Вы уверены?"],a=e,i=t,r=(0,o.iH)(""),c=()=>{i("update:popup-state",!1,1)},s=()=>{(r.value.length>0||4===a.popupState.action)&&(i("update:hierarchy-tree",r.value),c())};return(0,l.YP)((()=>a.popupState.show),(()=>{3===a.popupState.action?r.value=a.oldFilename:r.value=""})),(t,a)=>((0,l.wg)(),(0,l.iD)("div",U,[(0,l.Wm)((0,o.SU)(w.Z),{preset:"dialog",show:e.popupState.show,onHide:c},{header:(0,l.w5)((()=>[])),action:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(x.ZP),{type:"primary",ghost:"",onClick:s},{default:(0,l.w5)((()=>[(0,l.Uk)(" Ок ")])),_:1}),(0,l.Wm)((0,o.SU)(x.ZP),{type:"error",ghost:"",onClick:c},{default:(0,l.w5)((()=>[(0,l.Uk)(" Отмена ")])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",null,(0,g.zw)(n[e.popupState.action-1]),1),4!==e.popupState.action?((0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)((0,o.SU)(S.Z),{type:"text",value:r.value,"onUpdate:value":a[0]||(a[0]=e=>r.value=e),placeholder:"Введите название"},null,8,["value"])])):(0,l.kq)("",!0)])),_:1},8,["show"])]))}};const I=k;var j=I,C=n(5941);const W=["innerHTML"];var Z={__name:"ExplorerButtons",props:{hasSelectedObject:{type:Boolean,default:!1}},setup(e){const t=[{type:1,text:"Создать файл",color:"primary",content:"&#43;f",class:"file-explorer__add"},{type:2,text:"Создать папку",color:"primary",content:"&#43;d",class:"file-explorer__add"},{type:3,text:"Переименовать",color:"info",content:"&#9998;",class:"file-explorer__rename"},{type:4,text:"Удалить",color:"error",content:"&#9746;",class:"file-explorer__delete"}];return(n,a)=>((0,l.wg)(),(0,l.j4)((0,o.SU)(C.Z),{class:"explorer-btns",justify:"end"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(t,(t=>(0,l.Wm)((0,o.SU)(x.ZP),{key:t.type,type:t.color,title:t.text,disabled:(3===t.type||4===t.type)&&!e.hasSelectedObject,class:(0,g.C_)([t.class,"icon"]),size:"small",ghost:"",onClick:e=>n.$emit("update:popup-state",!0,t.type)},{default:(0,l.w5)((()=>[(0,l._)("span",{innerHTML:t.content},null,8,W)])),_:2},1032,["type","title","disabled","class","onClick"]))),64))])),_:1}))}};const F=(0,m.Z)(Z,[["__scopeId","data-v-e0cc73fe"]]);var O=F;const D={class:"file-item"},E={key:0,class:"file-item__folder-icon"},P={class:"file-item__childs"};var B={__name:"FileItem",props:{type:{type:String,required:!0},name:{type:String,required:!0},extension:{type:[String,null],default:null},childs:{type:Array,default:()=>[]},code:{type:String,default:""},id:{type:String,required:!0}},emits:["update:path"],setup(e,{emit:t}){const n=e,a=t,i=s(),r=(0,l.Fl)((()=>"dir"===n.type)),c=(0,l.Fl)((()=>{const{name:e,extension:t}=n;return r.value||0===t.length?e:`${e}.${t}`})),d=(e=[],t=null)=>{const i={id:n.id,type:n.type,name:n.name,extension:n.extension};"file"===n.type&&(i.code=n.code),a("update:path",[i,...e],t)},u=()=>{d([],n.id)};return(t,n)=>{const a=(0,l.up)("file-item",!0);return(0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("div",{class:(0,g.C_)(["file-item__head",{active:(0,o.SU)(i).activeElementId===e.id}]),onClick:u},[(0,l.Uk)((0,g.zw)(c.value)+" ",1),r.value?((0,l.wg)(),(0,l.iD)("span",E,"⤶")):(0,l.kq)("",!0)],2),(0,l._)("div",P,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.childs,(e=>((0,l.wg)(),(0,l.j4)(a,{key:e.id,id:e.id,name:e.name,extension:e.extension,type:e.type,code:e.code,childs:e.childs,"onUpdate:path":d},null,8,["id","name","extension","type","code","childs"])))),128))])])}}};const H=(0,m.Z)(B,[["__scopeId","data-v-67481dc0"]]);var T=H;const q={class:"file-explorer"},A=["onClick"];var V={__name:"FileExplorer",setup(e){const t=s(),n=c(),a=(0,o.qj)({show:!1,action:1}),r=(0,l.Fl)((()=>{if(!t.activeElement)return"";const e=t.activeElement;return e.extension.length>0?`${e.name}.${e.extension}`:e.name})),d=(e,t)=>{a.show=e,a.action=t},p=e=>{e.target.classList.contains("file-explorer__dir")&&(t.updateActiveElementId(null),n.updatePath([]))},h=(e=[],a=null)=>{a&&t.updateActiveElementId(a),n.updatePath(e)},v=e=>{const n=t.activeElement,i=1===a.action||"file"===n?.type,l=e.split("."),o=i&&l.length>1?l.at(-1):"",r=i&&l.length>1?l.slice(0,-1).join(""):e,c=t.currentBranch.childs.some((e=>e.name===r&&e.extension===o));if(e.length>0&&!c||4===a.action)switch(a.action){case 3:t.renameBranch(r,o);break;case 4:t.deleteBranch();break;default:t.createBranch(a.action,r,o)}};return(e,c)=>((0,l.wg)(),(0,l.iD)("div",q,[(0,l.Wm)((0,o.SU)(O),{"has-selected-object":!(0,o.SU)(n).isRootDir,"onUpdate:popupState":d},null,8,["has-selected-object"]),(0,l.Wm)((0,o.SU)(u.Z),null,{default:(0,l.w5)((()=>[(0,l.Uk)("File explorer")])),_:1}),(0,l._)("div",{class:(0,g.C_)(["file-explorer__dir",{active:(0,o.SU)(n).isRootDir}]),onClick:(0,i.iM)(p,["stop"])},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(t).hierarchyTree.childs,(e=>((0,l.wg)(),(0,l.j4)((0,o.SU)(T),{key:e.id,id:e.id,name:e.name,extension:e.extension,type:e.type,code:e.code,childs:e.childs,"onUpdate:path":h},null,8,["id","name","extension","type","code","childs"])))),128))],10,A),((0,l.wg)(),(0,l.j4)(l.lR,{to:"body"},[(0,l.Wm)((0,o.SU)(j),{"popup-state":a,"old-filename":r.value,"onUpdate:popupState":d,"onUpdate:hierarchyTree":v},null,8,["popup-state","old-filename"])]))]))}};const Y=(0,m.Z)(V,[["__scopeId","data-v-5096ddcc"]]);var R=Y,$=n(7672),z=n(5210);const M={class:"editor-view"};var J={__name:"EditorView",setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("div",M,[(0,l.Wm)((0,o.SU)($.Z),{cols:"4","item-responsive":""},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(z.ZP),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(R))])),_:1}),(0,l.Wm)((0,o.SU)(z.ZP),{span:"0 400:1 600:2 800:3"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(_))])),_:1})])),_:1})]))}};const K=(0,m.Z)(J,[["__scopeId","data-v-7bb23c11"]]);var L=K;const N={class:"app"};var Q={__name:"App",setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("div",N,[(0,l.Wm)((0,o.SU)(L))]))}};const X=Q;var G=X;const ee=(0,a.WB)(),te=(0,i.ri)(G);te.use(ee),te.mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,l){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],l=e[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(r=!1,l<o&&(o=l));if(r){e.splice(d--,1);var s=i();void 0!==s&&(t=s)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,i,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,o=a[0],r=a[1],c=a[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(c)var d=c(n)}for(t&&t(a);s<o.length;s++)l=o[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},a=self["webpackChunksimple_editor"]=self["webpackChunksimple_editor"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(3465)}));a=n.O(a)})();
//# sourceMappingURL=app.04942f3a.js.map